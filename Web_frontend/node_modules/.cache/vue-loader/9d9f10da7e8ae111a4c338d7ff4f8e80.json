{"remainingRequest":"F:\\springboot+vue\\pure-design-master\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\springboot+vue\\pure-design-master\\vue\\src\\views\\Order.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\springboot+vue\\pure-design-master\\vue\\src\\views\\Order.vue","mtime":1651922113214},{"path":"F:\\springboot+vue\\pure-design-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651840057970},{"path":"F:\\springboot+vue\\pure-design-master\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1651840062270},{"path":"F:\\springboot+vue\\pure-design-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651840057970},{"path":"F:\\springboot+vue\\pure-design-master\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1651840061711}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QiOw0KaW1wb3J0IHtzZXJ2ZXJJcH0gZnJvbSAiLi4vLi4vcHVibGljL2NvbmZpZyI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkFsbE9yZGVycyIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGN1cnJlbnRQYWdlOjEsDQogICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgdG90YWw6MCwNCiAgICAgIHBhZ2VOdW06MSwNCiAgICAgIHBhZ2VTaXplOjEwLA0KICAgICAgYWRkcmVzczogJycsDQogICAgICBzZXJ2ZXJJcDogc2VydmVySXAsDQogICAgICB1c2VyOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpKSA6IHt9LA0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczp7DQogICAgbG9hZCgpew0KICAgICAgY29uc29sZS5sb2coIkhlbGxvIikNCiAgICAgIHJlcXVlc3QuZ2V0KCIvb3JkZXIvcGFnZSIsew0KICAgICAgICBwYXJhbXM6ew0KICAgICAgICAgIHBhZ2VOdW06dGhpcy5wYWdlTnVtLA0KICAgICAgICAgIHBhZ2VTaXplOnRoaXMucGFnZVNpemUsDQogICAgICAgICAgYWRkcmVzczp0aGlzLmFkZHJlc3MsDQogICAgICAgIH0NCiAgICAgIH0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgY29uc29sZS5sb2cocmVzKQ0KICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5yZWNvcmRzDQogICAgICAgIHRoaXMudG90YWwgPSByZXMudG90YWwNCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHBhZ2VOdW0pIHsNCiAgICAgIGNvbnNvbGUubG9nKHBhZ2VOdW0pDQogICAgICB0aGlzLnBhZ2VOdW09cGFnZU51bQ0KICAgICAgdGhpcy5sb2FkKCkNCiAgICB9LA0KICAgIGZvcm1hdHRlcmRhdGUocm93LCBjb2x1bW4pew0KICAgICAgbGV0IGRhdGEgPSByb3dbY29sdW1uLnByb3BlcnR5XQ0KICAgICAgaWYoZGF0YSA9PSBudWxsKSB7DQogICAgICAgIHJldHVybiBudWxsDQogICAgICB9DQogICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKGRhdGEpOw0KICAgICAgdmFyIG8gPSB7DQogICAgICAgICJNKyIgOiBkYXRlLmdldE1vbnRoKCkrMSwgICAgICAgICAgICAgICAgIC8v5pyI5Lu9DQogICAgICAgICJkKyIgOiBkYXRlLmdldERhdGUoKSwgICAgICAgICAgICAgICAgICAgIC8v5pelDQogICAgICAgICJoKyIgOiBkYXRlLmdldEhvdXJzKCksICAgICAgICAgICAgICAgICAgIC8v5bCP5pe2DQogICAgICAgICJtKyIgOiBkYXRlLmdldE1pbnV0ZXMoKSwgICAgICAgICAgICAgICAgIC8v5YiGDQogICAgICAgICJzKyIgOiBkYXRlLmdldFNlY29uZHMoKSwgICAgICAgICAgICAgICAgIC8v56eSDQogICAgICAgICJxKyIgOiBNYXRoLmZsb29yKChkYXRlLmdldE1vbnRoKCkrMykvMyksIC8v5a2j5bqmDQogICAgICAgICJTIiAgOiBkYXRlLmdldE1pbGxpc2Vjb25kcygpICAgICAgICAgICAgIC8v5q+r56eSDQogICAgICB9Ow0KICAgICAgdmFyIGZtdCA9ICJ5eXl5LU1NLWRkIjsNCiAgICAgIGlmKC8oeSspLy50ZXN0KGZtdCkpIHsNCiAgICAgICAgZm10PWZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKGRhdGUuZ2V0RnVsbFllYXIoKSsiIikuc3Vic3RyKDQgLSBSZWdFeHAuJDEubGVuZ3RoKSk7DQogICAgICB9DQogICAgICBmb3IodmFyIGsgaW4gbykgew0KICAgICAgICBpZihuZXcgUmVnRXhwKCIoIisgayArIikiKS50ZXN0KGZtdCkpew0KICAgICAgICAgIGZtdCA9IGZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKFJlZ0V4cC4kMS5sZW5ndGg9PTEpID8gKG9ba10pIDogKCgiMDAiKyBvW2tdKS5zdWJzdHIoKCIiKyBvW2tdKS5sZW5ndGgpKSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiBmbXQgOw0KICAgIH0sDQogICAgYXN5bmMgZ2V0VXNlcigpIHsNCiAgICAgIHJldHVybiAoYXdhaXQgdGhpcy5yZXF1ZXN0LmdldCgiL3VzZXIvdXNlcm5hbWUvIiArIHRoaXMudXNlci51c2VybmFtZSkpLmRhdGENCiAgICB9LA0KDQoNCiAgfSwNCiAgY3JlYXRlZCgpew0KICAgIHRoaXMuYWRkcmVzcz10aGlzLnVzZXIuYWRkcmVzcw0KICAgIHRoaXMuZ2V0VXNlcigpLnRoZW4ocmVzID0+IHsNCiAgICAgIGNvbnNvbGUubG9nKHJlcykNCiAgICAgIHRoaXMuYWRkcmVzcz1yZXMuYWRkcmVzcw0KICAgIH0pDQogICAgaWYodGhpcy5hZGRyZXNzKXsNCiAgICAgIHRoaXMubG9hZCgpOw0KICAgIH0NCiAgICBjb25zb2xlLmxvZygiSGVsbG8sdXNlciIpDQogICAgY29uc29sZS5sb2codGhpcy5hZGRyZXNzKQ0KICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7DQogICAgICB0aGlzLmxvYWQoKTsgLy/kvaDnmoTmlrnms5UNCiAgICB9LCAyMDAwKTsNCiAgfSwNCiAgYmVmb3JlRGVzdHJveSgpIHsNCiAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOw0KICB9LA0KfQ0K"},{"version":3,"sources":["Order.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Order.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div style=\"width: 100%;\">\r\n    <div>\r\n      <el-table\r\n          ref=\"filterTable\"\r\n          :data=\"tableData\"\r\n          style=\"width: 100%\"\r\n          stripe>\r\n        <el-table-column prop=\"id\" label=\"交易编号\" width=\"180\"></el-table-column>\r\n        <el-table-column prop=\"time\" label=\"交易时间\"  width=\"180\" :formatter=\"formatterdate\"></el-table-column>\r\n        <el-table-column prop=\"address\" label=\"交易地点\" width=\"150\"></el-table-column>\r\n        <el-table-column prop=\"money\" label=\"交易金额\" width=\"150\"></el-table-column>\r\n        <el-table-column prop=\"student\" label=\"消费人员\" width=\"150\"></el-table-column>\r\n        <el-table-column prop=\"diets\" label=\"选购餐品\" width=\"150\"></el-table-column>\r\n        <el-table-column\r\n            prop=\"remakes\"\r\n            label=\"备注\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag\r\n                :type=\"scope.row.remakes === '正常' ? 'success' : 'danger'\"\r\n                disable-transitions>{{scope.row.remakes}}</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <div class=\"block\" style=\"text-align: right;margin-top: 5px\">\r\n      <el-pagination\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page.sync=\"currentPage\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"prev, pager, next, jumper\"\r\n          :total=\"total\">\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\nimport {serverIp} from \"../../public/config\";\r\n\r\nexport default {\r\n  name: \"AllOrders\",\r\n  data() {\r\n    return {\r\n      currentPage:1,\r\n      tableData: [],\r\n      total:0,\r\n      pageNum:1,\r\n      pageSize:10,\r\n      address: '',\r\n      serverIp: serverIp,\r\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\r\n    }\r\n  },\r\n  methods:{\r\n    load(){\r\n      console.log(\"Hello\")\r\n      request.get(\"/order/page\",{\r\n        params:{\r\n          pageNum:this.pageNum,\r\n          pageSize:this.pageSize,\r\n          address:this.address,\r\n        }\r\n      }).then(res => {\r\n        console.log(res)\r\n        this.tableData = res.records\r\n        this.total = res.total\r\n      })\r\n    },\r\n    handleCurrentChange(pageNum) {\r\n      console.log(pageNum)\r\n      this.pageNum=pageNum\r\n      this.load()\r\n    },\r\n    formatterdate(row, column){\r\n      let data = row[column.property]\r\n      if(data == null) {\r\n        return null\r\n      }\r\n      let date = new Date(data);\r\n      var o = {\r\n        \"M+\" : date.getMonth()+1,                 //月份\r\n        \"d+\" : date.getDate(),                    //日\r\n        \"h+\" : date.getHours(),                   //小时\r\n        \"m+\" : date.getMinutes(),                 //分\r\n        \"s+\" : date.getSeconds(),                 //秒\r\n        \"q+\" : Math.floor((date.getMonth()+3)/3), //季度\r\n        \"S\"  : date.getMilliseconds()             //毫秒\r\n      };\r\n      var fmt = \"yyyy-MM-dd\";\r\n      if(/(y+)/.test(fmt)) {\r\n        fmt=fmt.replace(RegExp.$1, (date.getFullYear()+\"\").substr(4 - RegExp.$1.length));\r\n      }\r\n      for(var k in o) {\r\n        if(new RegExp(\"(\"+ k +\")\").test(fmt)){\r\n          fmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : ((\"00\"+ o[k]).substr((\"\"+ o[k]).length)));\r\n        }\r\n      }\r\n      return fmt ;\r\n    },\r\n    async getUser() {\r\n      return (await this.request.get(\"/user/username/\" + this.user.username)).data\r\n    },\r\n\r\n\r\n  },\r\n  created(){\r\n    this.address=this.user.address\r\n    this.getUser().then(res => {\r\n      console.log(res)\r\n      this.address=res.address\r\n    })\r\n    if(this.address){\r\n      this.load();\r\n    }\r\n    console.log(\"Hello,user\")\r\n    console.log(this.address)\r\n    this.timer = setInterval(() => {\r\n      this.load(); //你的方法\r\n    }, 2000);\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(this.timer);\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-table .warning-row {\r\n  background: oldlace;\r\n}\r\n\r\n.el-table .success-row {\r\n  background: #f0f9eb;\r\n}\r\n</style>"]}]}